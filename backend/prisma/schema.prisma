datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum Estatus {
  PENDIENTE
  CONCLUIDA
  CANCELADA
}

enum Urgencia {
  BAJA
  MEDIA
  ALTA
}

enum Rol {
  ADMIN
  USUARIO
}

model Tarea {
  id              Int              @id @default(autoincrement())
  tarea           String
  asignador       String
  responsable     String
  fechaRegistro   DateTime
  fechaLimite     DateTime           
  fechaConclusion DateTime?          
  estatus         Estatus
  urgencia        Urgencia
  observaciones   String?
  historialFechas HistorialFecha[]  
}

model HistorialFecha {
  id            Int       @id @default(autoincrement())
  fechaAnterior DateTime
  nuevaFecha    DateTime
  modificadoPor String
  motivo        String?
  fechaCambio   DateTime   @default(now())

  tareaId       Int
  tarea         Tarea      @relation(fields: [tareaId], references: [id], onDelete: Cascade)
}

model Usuario {
  id           Int      @id @default(autoincrement())
  nombre       String
  username     String   @unique
  password     String
  rol          Rol      @default(USUARIO)
  fechaCreacion DateTime @default(now())
}

